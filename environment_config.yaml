attributes:
  metadata:
    group: 'storage'
    restrictions:
      - condition: "cluster:status == 'operational'"
        action: "none"
        message: |
          WARNING: Make changes carefully for deployed plugin.
          Lifecycle management is in EXPERIMENTAL mode.
          INFO: HOT PLUG is fully supported.


## ONTAP, E-Series and SolidFire Storage Families

## Global Options - it's related only for ONTAP and E-Series

  show_global_options:
    value: false
    label: 'Show Global Options for ONTAP and E-Series Storage Families'
    description: ''
    weight: 1
    type: 'checkbox'

  nfs_mount_options:
    value: ''
    label: 'NFS Mount Options - ONTAP'
    description: '(Optional) This option will be used when mounting shares on the Storage and Compute nodes'
    weight: 2
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.show_global_options.value != true"
        action: 'hide'
  use_multipath_for_image_xfer:
    value: true
    label: 'Multipath for Image Transfer - ONTAP and E-Series'
    description: '(Optional) If multipath has been enabled on your OpenStack hosts, then setting this option will permit Cinder to use multiple paths for increased bandwidth'
    weight: 3
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.show_global_options.value != true"
        action: 'hide'

# to separate clobal options

  separator:
    value: ''
    label: ''
    description: ' '
    weight: 4
    type: 'hidden'
    restrictions:
      - condition: "settings:cinder_netapp.show_global_options.value != true"
        action: 'hide'
  separator2:
    value: ''
    label: ''
    description: ' '
    weight: 5
    type: 'hidden'
    restrictions:
      - condition: "settings:cinder_netapp.show_global_options.value != true"
        action: 'hide'


  number_netapp_backends:
    type: 'select'
    weight: 10
    value: '1'
    label: 'NetApp Backends'
    description: 'Number of Netapp backends'
    values:
      - data: '1'
        label: '1'
      - data: '2'
        label: '2'
      - data: '3'
        label: '3'

## NetApp Backend 1

# Storage Type
  netapp_storage_family1:
    value: 'ontap_cluster'
    values:
        - data: 'ontap_cluster'
          label: 'Clustered Data ONTAP/ONTAP 9'
          description: ''
#        - data: 'ontap_7mode'
#          label: 'Data ONTAP 7-Mode'
#          description: ''
        - data: 'eseries'
          label: 'E-Series/EF-Series'
          description: ''
        - data: 'solidfire'
          label: 'SolidFire'
          description: ''
    label: '1st NetApp Backend Storage Family'
    weight: 111
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_storage_protocol1:
    value: 'iscsi'
    values:
        - data: 'iscsi'
          label: 'iSCSI'
          description: ''
        - data: 'nfs'
          label: 'NFS'
          description: ''
          restrictions:
            - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'eseries' or settings:cinder_netapp.netapp_storage_family1.value == 'solidfire'"
              action: 'hide'
    label: '1st NetApp Backend Storage Protocol'
    description: 'The storage protocol to be used on the data path with the storage system'
    weight: 112
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Authorisation
  netapp_login1:
    value: ''
    label: '1st NetApp Backend Username'
    description: 'Administrative user account name used to access the storage system or proxy server'
    weight: 121
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_password1:
    value: ''
    label: '1st NetApp Backend Password'
    description: 'Password for the administrative user account'
    weight: 122
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Connection
  netapp_server_hostname1:
    value: ''
    label: '1st NetApp Backend Storage Hostname/IP'
    description: 'The hostname or IP address for the storage system or proxy server'
    weight: 131
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_server_port1:
    value: ''
    label: '1st NetApp Backend Storage Port'
    description: 'The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS'
    weight: 132
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_transport_type1:
    value: 'http'
    values:
        - data: 'http'
          label: 'http'
          description: ''
        - data: 'https'
          label: 'https'
          description: ''
    label: '1st NetApp Backend Transport Type'
    description: 'The transport protocol used for communication with the storage system or proxy server'
    weight: 133
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# NFS Shares
  nb_share1:
    type: 'select'
    weight: 142
    value: '1'
    label: '1st NetApp Backend NFS shares'
    description: 'Number of Netapp NFS shares'
    values:
      - data: '1'
        label: '1'
      - data: '2'
        label: '2'
      - data: '3'
        label: '3'
      - data: '4'
        label: '4'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs'"
        action: 'hide'
  nfs_server_share11:
    value: ''
    label: 'CDOT FlexVol volume path 1'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol)'
    weight: 143
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs'"
        action: 'hide'
  nfs_server_share12:
    value: ''
    label: 'CDOT FlexVol volume path 2'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_2)'
    weight: 144
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs' or settings:cinder_netapp.nb_share1.value != '2' and settings:cinder_netapp.nb_share1.value != '3' and settings:cinder_netapp.nb_share1.value != '4'"
        action: 'hide'
  nfs_server_share13:
    value: ''
    label: 'CDOT FlexVol volume path 3'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_3)'
    weight: 145
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs' or settings:cinder_netapp.nb_share1.value != '3' and settings:cinder_netapp.nb_share1.value != '4'"
        action: "hide"
  nfs_server_share14:
    value: ''
    label: 'CDOT FlexVol volume path 4'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_4)'
    weight: 146
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs' or settings:cinder_netapp.nb_share1.value != '4'"
        action: 'hide'

# Ontap Cluster
  netapp_vserver1:
    value: ''
    label: '1st NetApp Backend Storage Virtual Machine'
    description: 'This option specifies the storage virtual machine (vserver) name in which provisioning of block storage volumes should occur'
    weight: 151
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'ontap_cluster'"
        action: 'hide'

# 7-Mode
  netapp_vfiler1:
    value: ''
    label: '1st NetApp Backend vFiler'
    description: '(Optional) The vFiler unit on which provisioning of block storage volumes will be done'
    weight: 151
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'ontap_7mode'"
        action: 'hide'

# E-Series
  netapp_controller_ips1:
    value: ''
    label: '1st NetApp Backend Controller IPs'
    description: 'This option is used to restrict provisioning to the specified controllers. Specify the value of this option to be a comma separated list of controller management hostnames or IP addresses to be used for provisioning'
    weight: 151
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'eseries'"
        action: 'hide'
  netapp_sa_password1:
    value: ''
    label: '1st NetApp Backend Storage Array Password'
    description: 'Password for the NetApp E-Series storage array'
    weight: 152
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'eseries'"
        action: 'hide'
  netapp_eseries_host_type1:
    value: 'linux_dm_mp'
    label: '1st NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 162
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'eseries'"
        action: 'hide'
  netapp_enable_multiattach1:
    value: false
    label: '1st NetApp Backend Multiattach'
    description: '(Optional) This option specifies whether the driver should allow operations that require multiple attachments to a volume'
    weight: 163
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family1.value != 'eseries'"
        action: "hide"

# NFS Options
  thres_avl_size_perc_start1:
    value: '20'
    label: '1st NetApp Backend Threshold Available Size (% Start)'
    description: '(Optional) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned'
    weight: 162
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs'"
        action: "hide"
  thres_avl_size_perc_stop1:
    value: '60'
    label: '1st NetApp Backend Threshold Available Size (% Stop)'
    description: '(Optional) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache'
    weight: 163
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs'"
        action: 'hide'
  expiry_thres_minutes1:
    value: '720'
    label: '1st NetApp Backend Expiry Threshold (Minutes)'
    description: '(Optional) This option specifies the threshold for last access time for images in the NFS image cache'
    weight: 164
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs'"
        action: 'hide'

# Ontap Cluster with NFS
  netapp_copyoffload_tool_path1:
    value: ''
    label: '1st NetApp Backend Copy Offload Tool Path'
    description: '(Optional) This option specifies the path of the NetApp copy offload tool binary'
    weight: 165
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'nfs' or settings:cinder_netapp.netapp_storage_family1.value != 'ontap_cluster'"
        action: 'hide'

# iSCSI
  netapp_pool_name_search_pattern1:
    value: '(.+)'
    label: '1st NetApp Backend Pool Search Pattern'
    description: '(Optional) This option is used to restrict provisioning to the specified volume groups or disk pools. Specify the value of this option as a regular expression which will be applied to the names of volume groups or disk pools from the storage backend which represent pools in Cinder'
    weight: 161
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'iscsi'"
        action: "hide"

# iSCSI with ONTAP
  netapp_host_type1:
    value: 'linux'
    label: '1st NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 162
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family1.value == 'eseries'"
        action: "hide"
  netapp_lun_ostype1:
    value: 'linux'
    label: '1st NetApp Backend LUN OS type'
    description: '(Optional) This option defines the type of operating system that will access a LUN exported from Data ONTAP'
    weight: 163
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family1.value == 'eseries'"
        action: 'hide'
  netapp_lun_space_reservation1:
    value: true
    label: '1st NetApp Backend LUN Space Reservation'
    description: '(Optional) This option specifies whether space will be reserved when creating Cinder volumes on NetApp backends using the iSCSI protocol'
    weight: 164
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol1.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family1.value == 'eseries'"
        action: 'hide'

# Common
  reserved_percentage1:
    value: '0'
    label: '1st NetApp Backend Reserved Percentage'
    description: '(Optional) This option represents the amount of total capacity of a storage pool that will be reserved and cannot be utilized for provisioning Cinder volumes'
    weight: 171
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  max_oversubscription_ratio1:
    value: '1.0'
    label: '1st NetApp Backend Oversubscription Ratio'
    description: '(Optional) This option specifies the amount of over-provisioning to allow when thin provisioning is used in the storage pool. A value of 1.0 will mean that the provisioned capacity will not be able to exceed the total capacity, while larger values will result in increased levels of over-provisioning'
    weight: 172
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '1' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'


## NetApp Backend 2

# Storage Type
  netapp_storage_family2:
    value: 'ontap_cluster'
    values:
        - data: 'ontap_cluster'
          label: 'Clustered Data ONTAP/ONTAP 9'
          description: ''
#        - data: 'ontap_7mode'
#          label: 'Data ONTAP 7-Mode'
#          description: ''
        - data: 'eseries'
          label: 'E-Series/EF-Series'
          description: ''
        - data: 'solidfire'
          label: 'SolidFire'
          description: ''
    label: '2nd NetApp Backend Storage Family'
    weight: 211
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_storage_protocol2:
    value: 'iscsi'
    values:
        - data: 'iscsi'
          label: 'iSCSI'
          description: ''
        - data: 'nfs'
          label: 'NFS'
          description: ''
          restrictions:
            - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'eseries' or settings:cinder_netapp.netapp_storage_family2.value == 'solidfire'"
              action: 'hide'
    label: '2nd NetApp Backend Storage Protocol'
    description: 'The storage protocol to be used on the data path with the storage system'
    weight: 212
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Authorisation
  netapp_login2:
    value: ''
    label: '2nd NetApp Backend Username'
    description: 'Administrative user account name used to access the storage system or proxy server'
    weight: 221
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_password2:
    value: ''
    label: '2nd NetApp Backend Password'
    description: 'Password for the administrative user account'
    weight: 222
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Connection
  netapp_server_hostname2:
    value: ''
    label: '2nd NetApp Backend Storage Hostname/IP'
    description: 'The hostname or IP address for the storage system or proxy server'
    weight: 231
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_server_port2:
    value: ''
    label: '2nd NetApp Backend Storage Port'
    description: 'The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS'
    weight: 232
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_transport_type2:
    value: 'http'
    values:
        - data: 'http'
          label: 'http'
          description: ''
        - data: 'https'
          label: 'https'
          description: ''
    label: '2nd NetApp Backend Transport Type'
    description: 'The transport protocol used for communication with the storage system or proxy server'
    weight: 233
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# NFS Shares
  nb_share2:
    type: 'select'
    weight: 242
    value: '1'
    label: '2nd NetApp Backend NFS shares'
    description: 'Number of Netapp NFS shares'
    values:
      - data: '1'
        label: '1'
      - data: '2'
        label: '2'
      - data: '3'
        label: '3'
      - data: '4'
        label: '4'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs'"
        action: 'hide'
  nfs_server_share21:
    value: ''
    label: 'CDOT FlexVol volume path'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol)'
    weight: 243
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs'"
        action: 'hide'
  nfs_server_share22:
    value: ''
    label: 'CDOT FlexVol volume path 2'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_2)'
    weight: 244
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs' or settings:cinder_netapp.nb_share2.value != '2' and settings:cinder_netapp.nb_share2.value != '3' and settings:cinder_netapp.nb_share2.value != '4'"
        action: 'hide'
  nfs_server_share23:
    value: ''
    label: 'CDOT FlexVol volume path 3'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_3)'
    weight: 245
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs' or settings:cinder_netapp.nb_share2.value != '3' and settings:cinder_netapp.nb_share2.value != '4'"
        action: "hide"
  nfs_server_share24:
    value: ''
    label: 'CDOT FlexVol volume path 4'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_4)'
    weight: 246
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs' or settings:cinder_netapp.nb_share2.value != '4'"
        action: 'hide'

# Ontap Cluster
  netapp_vserver2:
    value: ''
    label: '2nd NetApp Backend Storage Virtual Machine'
    description: 'This option specifies the storage virtual machine (vserver) name in which provisioning of block storage volumes should occur'
    weight: 251
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'ontap_cluster'"
        action: 'hide'

# 7-Mode
  netapp_vfiler2:
    value: ''
    label: '2nd NetApp Backend vFiler'
    description: '(Optional) The vFiler unit on which provisioning of block storage volumes will be done'
    weight: 251
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'ontap_7mode'"
        action: 'hide'

# E-Series
  netapp_controller_ips2:
    value: ''
    label: '2nd NetApp Backend Controller IPs'
    description: 'This option is used to restrict provisioning to the specified controllers. Specify the value of this option to be a comma separated list of controller management hostnames or IP addresses to be used for provisioning'
    weight: 251
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'eseries'"
        action: 'hide'
  netapp_sa_password2:
    value: ''
    label: '2nd NetApp Backend Storage Array Password'
    description: 'Password for the NetApp E-Series storage array'
    weight: 252
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'eseries'"
        action: 'hide'
  netapp_eseries_host_type2:
    value: 'linux_dm_mp'
    label: '2nd NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 262
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'eseries'"
        action: 'hide'
  netapp_enable_multiattach2:
    value: false
    label: '2nd NetApp Backend Multiattach'
    description: '(Optional) This option specifies whether the driver should allow operations that require multiple attachments to a volume'
    weight: 263
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family2.value != 'eseries'"
        action: "hide"

# NFS Options
  thres_avl_size_perc_start2:
    value: '20'
    label: '2nd NetApp Backend Threshold Available Size (% Start)'
    description: '(Optional) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned'
    weight: 262
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs'"
        action: "hide"
  thres_avl_size_perc_stop2:
    value: '60'
    label: '2nd NetApp Backend Threshold Available Size (% Stop)'
    description: '(Optional) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache'
    weight: 263
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs'"
        action: 'hide'
  expiry_thres_minutes2:
    value: '720'
    label: '2nd NetApp Backend Expiry Threshold (Minutes)'
    description: '(Optional) This option specifies the threshold for last access time for images in the NFS image cache'
    weight: 264
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs'"
        action: 'hide'

# Ontap Cluster with NFS
  netapp_copyoffload_tool_path2:
    value: ''
    label: '2nd NetApp Backend Copy Offload Tool Path'
    description: '(Optional) This option specifies the path of the NetApp copy offload tool binary'
    weight: 265
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'nfs' or settings:cinder_netapp.netapp_storage_family2.value != 'ontap_cluster'"
        action: 'hide'

# iSCSI
  netapp_pool_name_search_pattern2:
    value: '(.+)'
    label: '2nd NetApp Backend Pool Search Pattern'
    description: '(Optional) This option is used to restrict provisioning to the specified volume groups or disk pools. Specify the value of this option as a regular expression which will be applied to the names of volume groups or disk pools from the storage backend which represent pools in Cinder'
    weight: 261
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'iscsi'"
        action: "hide"

# iSCSI with ONTAP
  netapp_host_type2:
    value: 'linux'
    label: '2nd NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 262
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family2.value == 'eseries'"
        action: "hide"
  netapp_lun_ostype2:
    value: 'linux'
    label: '2nd NetApp Backend LUN OS type'
    description: '(Optional) This option defines the type of operating system that will access a LUN exported from Data ONTAP'
    weight: 263
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family2.value == 'eseries'"
        action: 'hide'
  netapp_lun_space_reservation2:
    value: true
    label: '2nd NetApp Backend LUN Space Reservation'
    description: '(Optional) This option specifies whether space will be reserved when creating Cinder volumes on NetApp backends using the iSCSI protocol'
    weight: 264
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol2.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family2.value == 'eseries'"
        action: 'hide'

# Common
  reserved_percentage2:
    value: '0'
    label: '2nd NetApp Backend Reserved Percentage'
    description: '(Optional) This option represents the amount of total capacity of a storage pool that will be reserved and cannot be utilized for provisioning Cinder volumes'
    weight: 271
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  max_oversubscription_ratio2:
    value: '1.0'
    label: '2nd NetApp Backend Oversubscription Ratio'
    description: '(Optional) This option specifies the amount of over-provisioning to allow when thin provisioning is used in the storage pool. A value of 1.0 will mean that the provisioned capacity will not be able to exceed the total capacity, while larger values will result in increased levels of over-provisioning'
    weight: 272
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'


## NetApp Backend 3

# Storage Type
  netapp_storage_family3:
    value: 'ontap_cluster'
    values:
        - data: 'ontap_cluster'
          label: 'Clustered Data ONTAP/ONTAP 9'
          description: ''
#        - data: 'ontap_7mode'
#          label: 'Data ONTAP 7-Mode'
#          description: ''
        - data: 'eseries'
          label: 'E-Series/EF-Series'
          description: ''
        - data: 'solidfire'
          label: 'SolidFire'
          description: ''
    label: '3rd NetApp Backend Storage Family'
    weight: 311
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_storage_protocol3:
    value: 'iscsi'
    values:
        - data: 'iscsi'
          label: 'iSCSI'
          description: ''
        - data: 'nfs'
          label: 'NFS'
          description: ''
          restrictions:
            - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'eseries' or settings:cinder_netapp.netapp_storage_family3.value == 'solidfire'"
              action: 'hide'
    label: '3rd NetApp Backend Storage Protocol'
    description: 'The storage protocol to be used on the data path with the storage system'
    weight: 312
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Authorisation
  netapp_login3:
    value: ''
    label: '3rd NetApp Backend Username'
    description: 'Administrative user account name used to access the storage system or proxy server'
    weight: 321
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_password3:
    value: ''
    label: '3rd NetApp Backend Password'
    description: 'Password for the administrative user account'
    weight: 322
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Connection
  netapp_server_hostname3:
    value: ''
    label: '3rd NetApp Backend Storage Hostname/IP'
    description: 'The hostname or IP address for the storage system or proxy server'
    weight: 331
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_server_port3:
    value: ''
    label: '3rd NetApp Backend Storage Port'
    description: 'The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS'
    weight: 332
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  netapp_transport_type3:
    value: 'http'
    values:
        - data: 'http'
          label: 'http'
          description: ''
        - data: 'https'
          label: 'https'
          description: ''
    label: '3rd NetApp Backend Transport Type'
    description: 'The transport protocol used for communication with the storage system or proxy server'
    weight: 333
    type: 'radio'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# NFS Shares
  nb_share3:
    type: 'select'
    weight: 342
    value: '1'
    label: '3rd NetApp Backend NFS shares'
    description: 'Number of Netapp NFS shares'
    values:
      - data: '1'
        label: '1'
      - data: '2'
        label: '2'
      - data: '3'
        label: '3'
      - data: '4'
        label: '4'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs'"
        action: 'hide'
  nfs_server_share31:
    value: ''
    label: 'CDOT FlexVol volume path'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol)'
    weight: 343
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs'"
        action: 'hide'
  nfs_server_share32:
    value: ''
    label: 'CDOT FlexVol volume path 2'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_2)'
    weight: 344
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs' or settings:cinder_netapp.nb_share3.value != '2' and settings:cinder_netapp.nb_share3.value != '3' and settings:cinder_netapp.nb_share3.value != '4'"
        action: 'hide'
  nfs_server_share33:
    value: ''
    label: 'CDOT FlexVol volume path 3'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_3)'
    weight: 345
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs' or settings:cinder_netapp.nb_share3.value != '3' and settings:cinder_netapp.nb_share3.value != '4'"
        action: "hide"
  nfs_server_share34:
    value: ''
    label: 'CDOT FlexVol volume path 4'
    description: 'Specifies the path for the FlexVol volume in which Cinder volumes should be placed (e.g. 10.10.10.10:/cinder_flexvol_4)'
    weight: 346
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs' or settings:cinder_netapp.nb_share3.value != '4'"
        action: 'hide'

# Ontap Cluster
  netapp_vserver3:
    value: ''
    label: '3rd NetApp Backend Storage Virtual Machine'
    description: 'This option specifies the storage virtual machine (vserver) name in which provisioning of block storage volumes should occur'
    weight: 351
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'ontap_cluster'"
        action: 'hide'

# 7-Mode
  netapp_vfiler3:
    value: ''
    label: '3rd NetApp Backend vFiler'
    description: '(Optional) The vFiler unit on which provisioning of block storage volumes will be done'
    weight: 351
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'ontap_7mode'"
        action: 'hide'

# E-Series
  netapp_controller_ips3:
    value: ''
    label: '3rd NetApp Backend Controller IPs'
    description: 'This option is used to restrict provisioning to the specified controllers. Specify the value of this option to be a comma separated list of controller management hostnames or IP addresses to be used for provisioning'
    weight: 351
    type: 'text'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'eseries'"
        action: 'hide'
  netapp_sa_password3:
    value: ''
    label: '3rd NetApp Backend Storage Array Password'
    description: 'Password for the NetApp E-Series storage array'
    weight: 352
    type: 'password'
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'eseries'"
        action: 'hide'
  netapp_eseries_host_type3:
    value: 'linux_dm_mp'
    label: '3rd NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 362
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'eseries'"
        action: 'hide'
  netapp_enable_multiattach3:
    value: false
    label: '3rd NetApp Backend Multiattach'
    description: '(Optional) This option specifies whether the driver should allow operations that require multiple attachments to a volume'
    weight: 363
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_family3.value != 'eseries'"
        action: "hide"

# NFS Options
  thres_avl_size_perc_start3:
    value: '20'
    label: '3rd NetApp Backend Threshold Available Size (% Start)'
    description: '(Optional) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned'
    weight: 362
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs'"
        action: "hide"
  thres_avl_size_perc_stop3:
    value: '60'
    label: '3rd NetApp Backend Threshold Available Size (% Stop)'
    description: '(Optional) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache'
    weight: 363
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs'"
        action: 'hide'
  expiry_thres_minutes3:
    value: '720'
    label: '3rd NetApp Backend Expiry Threshold (Minutes)'
    description: '(Optional) This option specifies the threshold for last access time for images in the NFS image cache'
    weight: 364
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs'"
        action: 'hide'

# Ontap Cluster with NFS
  netapp_copyoffload_tool_path3:
    value: ''
    label: '3rd NetApp Backend Copy Offload Tool Path'
    description: '(Optional) This option specifies the path of the NetApp copy offload tool binary'
    weight: 365
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'nfs' or settings:cinder_netapp.netapp_storage_family3.value != 'ontap_cluster'"
        action: 'hide'

# iSCSI
  netapp_pool_name_search_pattern3:
    value: '(.+)'
    label: '3rd NetApp Backend Pool Search Pattern'
    description: '(Optional) This option is used to restrict provisioning to the specified volume groups or disk pools. Specify the value of this option as a regular expression which will be applied to the names of volume groups or disk pools from the storage backend which represent pools in Cinder'
    weight: 361
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'iscsi'"
        action: "hide"

# iSCSI with ONTAP
  netapp_host_type3:
    value: 'linux'
    label: '3rd NetApp Backend Host Type'
    description: '(Optional) This option defines the type of operating system for all initiators that can access a LUN'
    weight: 362
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family3.value == 'eseries'"
        action: "hide"
  netapp_lun_ostype3:
    value: 'linux'
    label: '3rd NetApp Backend LUN OS type'
    description: '(Optional) This option defines the type of operating system that will access a LUN exported from Data ONTAP'
    weight: 363
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family3.value == 'eseries'"
        action: 'hide'
  netapp_lun_space_reservation3:
    value: true
    label: '3rd NetApp Backend LUN Space Reservation'
    description: '(Optional) This option specifies whether space will be reserved when creating Cinder volumes on NetApp backends using the iSCSI protocol'
    weight: 364
    type: 'checkbox'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' or settings:cinder_netapp.netapp_storage_protocol3.value != 'iscsi' or settings:cinder_netapp.netapp_storage_family3.value == 'eseries'"
        action: 'hide'

# Common
  reserved_percentage3:
    value: '0'
    label: '3rd NetApp Backend Reserved Percentage'
    description: '(Optional) This option represents the amount of total capacity of a storage pool that will be reserved and cannot be utilized for provisioning Cinder volumes'
    weight: 371
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  max_oversubscription_ratio3:
    value: '1.0'
    label: '3rd NetApp Backend Oversubscription Ratio'
    description: '(Optional) This option specifies the amount of over-provisioning to allow when thin provisioning is used in the storage pool. A value of 1.0 will mean that the provisioned capacity will not be able to exceed the total capacity, while larger values will result in increased levels of over-provisioning'
    weight: 372
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value == 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'


## SolidFire Storage 1

# Authorisation
  solidfire_admin_login1:
    value: ''
    label: '1st NetApp Backend Login for Cluster Admin account (san_login)'
    description: 'Cluster account used by Cinder service.'
    weight: 121
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'
  solidfire_admin_password1:
    value: ''
    label: '1st NetApp Backend Password for Cluster Admin account (san_password)'
    description: 'Cluster account used by Cinder service.'
    weight: 122
    type: "password"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'

# Connection
  solidfire_mvip1:
    value: ''
    label: '1st NetApp Backend Cluster MVIP (san_ip)'
    description: 'The hostname (or IP address) for the SolidFire Cluster API endpoint.'
    weight: 131
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'
  solidfire_api_port1:
    value: '443'
    label: '1st NetApp Backend Cluster endpoint port'
    description: 'The TCP port to use for API communication with the cluster or proxy server.'
    weight: 132
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'

# Parameters
  solidfire_allow_template_caching1:
    value: true
    label: '1st NetApp Backend Enable Caching'
    description: 'When creating bootable volumes, create an image cache on the SolidFire cluster.'
    weight: 141
    type: "checkbox"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'
  solidfire_template_account1:
    value: 'openstack-vtemplate'
    label: '1st NetApp Backend Template Account'
    description: 'SolidFire account to use to hold the template cache.'
    weight: 142
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'
  solidfire_account_prefix1:
    value: ''
    label: '1st NetApp Backend SF account prefix'
    description: 'Prefix to use for all SolidFire accounts related to this OpenStack.'
    weight: 143
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'
  solidfire_volume_prefix1:
    value: 'UUID-'
    label: '1st NetApp Backend SF volume prefix'
    description: 'Prefix to use for all SolidFire volumes related to this OpenStaack Cloud.'
    weight: 144
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family1.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2' and settings:cinder_netapp.number_netapp_backends.value != '1'"
        action: 'hide'

## SolidFire Storage 2

# Authorisation
  solidfire_admin_login2:
    value: ''
    label: '2nd NetApp Backend Login for Cluster Admin account (san_login)'
    description: 'Cluster account used by Cinder service.'
    weight: 221
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'
  solidfire_admin_password2:
    value: ''
    label: '2nd NetApp Backend Password for Cluster Admin account (san_password)'
    description: 'Cluster account used by Cinder service.'
    weight: 222
    type: "password"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'

# Connection
  solidfire_mvip2:
    value: ''
    label: '2nd NetApp Backend Cluster MVIP (san_ip)'
    description: 'The hostname (or IP address) for the SolidFire Cluster API endpoint.'
    weight: 231
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'
  solidfire_api_port2:
    value: '443'
    label: '2nd NetApp Backend Cluster endpoint port'
    description: 'The TCP port to use for API communication with the cluster or proxy server.'
    weight: 232
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'

# Parameters
  solidfire_allow_template_caching2:
    value: true
    label: '2nd NetApp Backend Enable Caching'
    description: 'When creating bootable volumes, create an image cache on the SolidFire cluster.'
    weight: 241
    type: "checkbox"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'
  solidfire_template_account2:
    value: 'openstack-vtemplate'
    label: '2nd NetApp Backend Template Account'
    description: 'SolidFire account to use to hold the template cache.'
    weight: 242
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'
  solidfire_account_prefix2:
    value: ''
    label: '2nd NetApp Backend SF account prefix'
    description: 'Prefix to use for all SolidFire accounts related to this OpenStack.'
    weight: 243
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'
  solidfire_volume_prefix2:
    value: 'UUID-'
    label: '2nd NetApp Backend SF volume prefix'
    description: 'Prefix to use for all SolidFire volumes related to this OpenStaack Cloud.'
    weight: 244
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family2.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3' and settings:cinder_netapp.number_netapp_backends.value != '2'"
        action: 'hide'

## SolidFire Storage 3

# Authorisation
  solidfire_admin_login3:
    value: ''
    label: '3rd NetApp Backend Login for Cluster Admin account (san_login)'
    description: 'Cluster account used by Cinder service.'
    weight: 321
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  solidfire_admin_password3:
    value: ''
    label: '3rd NetApp Backend Password for Cluster Admin account (san_password)'
    description: 'Cluster account used by Cinder service.'
    weight: 322
    type: "password"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Connection
  solidfire_mvip3:
    value: ''
    label: '3rd NetApp Backend Cluster MVIP (san_ip)'
    description: 'The hostname (or IP address) for the SolidFire Cluster API endpoint.'
    weight: 331
    type: "text"
    regex:
      source: '\S'
      error: "This field cannot be empty"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  solidfire_api_port3:
    value: '443'
    label: '3rd NetApp Backend Cluster endpoint port'
    description: 'The TCP port to use for API communication with the cluster or proxy server.'
    weight: 332
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'

# Parameters
  solidfire_allow_template_caching3:
    value: true
    label: '3rd NetApp Backend Enable Caching'
    description: 'When creating bootable volumes, create an image cache on the SolidFire cluster.'
    weight: 341
    type: "checkbox"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  solidfire_template_account3:
    value: 'openstack-vtemplate'
    label: '3rd NetApp Backend Template Account'
    description: 'SolidFire account to use to hold the template cache.'
    weight: 342
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  solidfire_account_prefix3:
    value: ''
    label: '3rd NetApp Backend SF account prefix'
    description: 'Prefix to use for all SolidFire accounts related to this OpenStack.'
    weight: 343
    type: "text"
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
  solidfire_volume_prefix3:
    value: 'UUID-'
    label: '3rd NetApp Backend SF volume prefix'
    description: 'Prefix to use for all SolidFire volumes related to this OpenStaack Cloud.'
    weight: 344
    type: 'text'
    restrictions:
      - condition: "settings:cinder_netapp.netapp_storage_family3.value != 'solidfire' or settings:cinder_netapp.number_netapp_backends.value != '3'"
        action: 'hide'
